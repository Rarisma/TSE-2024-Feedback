@page "/onboarding"
@using Application.API
@using Microsoft.AspNetCore.Components.Forms
@rendermode InteractiveServer
@inject NavigationManager NavigationManager
@inject IJSRuntime JSRuntime

<PageTitle>TSE Feedback: Onboarding</PageTitle>

<div class="container-fluid">
    <!-- Page Layout -->
    <div class="row justify-content-center align-items-center pt-3">
        <div class="col text-center d-flex justify-content-center align-items-center">
            <img src="Images/HomeBubble.gif" alt="Icon" class="logo-icon" style="width: 100px; height: auto; margin-right: 10px;">
            <h3 class="top-heading">CMP2804-24/25 TSE Feedback Tracking Tool!</h3>
        </div>
    </div>

    <div class="container mt-4">
        <RadzenCard Style="max-width: 800px; margin: 50px auto; padding: 30px; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); border-radius: 15px;">
            <div Style="text-align: center; margin-bottom: 30px;">
                <RadzenText TextStyle="TextStyle.DisplayH3" Style="margin-bottom: 10px; color: #333333; font-weight: bold;">Account Setup</RadzenText>
                <RadzenText TextStyle="TextStyle.Subtitle1" Style="color: #666666; margin-bottom: 25px;">Complete your profile to get started</RadzenText>

                <!-- Selection tabs -->
                <div class="d-flex justify-content-center mb-4">
                    <RadzenTabs Change=@OnTabChange Style="width: 350px; margin: 0 auto;">
                        <Tabs>
                            <RadzenTabsItem Text="STUDENT" Selected="!isTeacher">
                            </RadzenTabsItem>
                            <RadzenTabsItem Text="TEACHER" Selected="isTeacher">
                            </RadzenTabsItem>
                        </Tabs>
                    </RadzenTabs>
                </div>
            </div>

            @if (isTeacher)
            {
                <!-- Teacher -->
                <div class="teacher-onboarding">
                    <RadzenText TextStyle="TextStyle.H5" Style="margin-bottom: 20px; color: #333333; text-align: center;">Teacher Onboarding</RadzenText>


                    <!-- Bulk Create, we need to consider the text boxes and how the process will work -->
                    <RadzenFieldset Text="Generate Multiple Accounts" Style="margin-bottom: 25px;">
                        <RadzenText TextStyle="TextStyle.Body1" Style="margin-bottom: 15px; color: #555555;">
                            Quickly generate student accounts for your class with automated usernames.
                        </RadzenText>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <RadzenText TextStyle="TextStyle.Subtitle2" Style="color: #444444; margin-bottom: 5px;">Number of Students</RadzenText>
                                <RadzenNumeric TValue="int" Min="1" Max="500" @bind-Value="numberOfStudents" Style="width: 100%; border-radius: 8px; padding: 5px; background-color: rgba(255, 255, 255, 0.8);" />
                            </div>
                            <div class="col-md-6">
                                <RadzenText TextStyle="TextStyle.Subtitle2" Style="color: #444444; margin-bottom: 5px;">Email Domain</RadzenText>
                                <RadzenTextBox Placeholder="example.edu" @bind-Value="emailDomain" Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                            </div>
                        </div>

                        <div class="mb-3">
                            <RadzenText TextStyle="TextStyle.Subtitle2" Style="color: #444444; margin-bottom: 5px;">Common Password for All Students</RadzenText>
                            <RadzenPassword Placeholder="Enter password for all student accounts" Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                            <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-top: 5px;">
                                This password will be applied to all generated student accounts
                            </RadzenText>
                        </div>

                        <div class="d-flex justify-content-end mt-3">
                            <RadzenButton Text="Generate Accounts" Icon="group_add" ButtonStyle="ButtonStyle.Info" Style="border-radius: 8px;" />
                        </div>
                    </RadzenFieldset>

                    <!-- bulk create with a csv file? -->
                    <RadzenFieldset Text="Bulk Student Upload" Style="margin-bottom: 25px; margin-left: -5px;">
                        <RadzenText TextStyle="TextStyle.Body1" Style="margin-bottom: 15px; color: #555555;">
                            Upload a CSV file to create multiple student accounts at once.
                        </RadzenText>

                        <div class="mb-3">
                            <RadzenText TextStyle="TextStyle.Subtitle2" Style="color: #444444; margin-bottom: 5px;">File Format</RadzenText>
                            <RadzenText TextStyle="TextStyle.Body2" Style="color: #666666; margin-bottom: 10px;">
                                <strong>FirstName,LastName,Email,Username</strong>
                            </RadzenText>
                        </div>

                        <div class="d-flex align-items-center mb-3">
                            <InputFile class="form-control" Style="border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" accept=".csv" />
                            <RadzenButton Text="Upload" Icon="cloud_upload" ButtonStyle="ButtonStyle.Secondary" Style="margin-left: 10px; border-radius: 8px;" />
                        </div>

                        <RadzenProgressBar Value="0" ShowValue="false" Style="margin-top: 10px; height: 5px;" Visible="false" />
                    </RadzenFieldset>

                    <div class="d-grid mt-4">
                        <RadzenButton Text="Complete Teacher Setup" Icon="person_add" ButtonStyle="ButtonStyle.Primary" 
                        Style="padding: 12px; font-size: 16px; width: 100%; border-radius: 8px; background-color: #5c6bc0;" />
                    </div>
                </div>
            }
            else
            {
                <!-- Students -->
                <div class="student-onboarding">
                    <RadzenText TextStyle="TextStyle.H5" Style="margin-bottom: 20px; color: #333333; text-align: center;">Student Registration</RadzenText>

                    <div class="row mb-4">
                        <div class="col-md-6 mb-3">
                            <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">First Name</RadzenText>
                            <RadzenTextBox Placeholder="Your first name" @bind-Value="FirstName" 
                            Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                        </div>
                        <div class="col-md-6 mb-3">
                            <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Last Name</RadzenText>
                            <RadzenTextBox Placeholder="Your last name" @bind-Value="LastName" 
                            Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                        </div>
                    </div>

                    <div class="mb-4">
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Username</RadzenText>
                        <RadzenTextBox Placeholder="Create a username" @bind-Value="Username" 
                        Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                    </div>

                    <div class="mb-4">
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Email Address</RadzenText>
                        <RadzenTextBox Placeholder="Your email address" @bind-Value="Email" 
                        Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                    </div>

                    <div class="mb-4">
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Password</RadzenText>
                        <RadzenPassword Placeholder="Create a password" @bind-Value="Password" 
                        Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                    </div>

                    <div class="mb-4">
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Confirm Password</RadzenText>
                        <RadzenPassword Placeholder="Confirm your password" @bind-Value="Password2" 
                        Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                    </div>

                    <div class="mb-4">
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #666666; margin-bottom: 5px;">Class Code (Optional)</RadzenText>
                        <RadzenTextBox Placeholder="Enter class code if provided by your teacher" 
                        Style="width: 100%; border-radius: 8px; padding: 10px; background-color: rgba(255, 255, 255, 0.8);" />
                        <RadzenText TextStyle="TextStyle.Caption" Style="color: #777777; margin-top: 5px; font-style: italic;">
                            If your teacher has provided a class code, enter it here to be automatically added to your class
                        </RadzenText>
                    </div>

                    <RadzenText TextStyle="TextStyle.Caption" Style="margin-bottom: 20px; color: #555555;">
                        Password must be at least 8 characters long, contain at least one uppercase letter, and one special character.
                    </RadzenText>

                    <div class="d-grid mt-4">
                        <RadzenButton Text="Create Student Account" Icon="school" ButtonStyle="ButtonStyle.Primary" 
                        Style="padding: 12px; font-size: 16px; width: 100%; border-radius: 8px; background-color: #5c6bc0;" />
                    </div>
                </div>
            }
        </RadzenCard>
    </div>
</div>

@code {
    private bool isTeacher = false;
    private int numberOfStudents = 30;
    private string emailDomain = "";

    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
    public string Password { get; set; }
    public string Password2 { get; set; }

    private void OnTabChange(int index)
    {
        isTeacher = index == 1;
    }
} 